version: "3"

services:
  spring:
    image: tsobu/spring-cropmanager:latest
    #container_name: spring-cropmanager
    restart: always
    expose:
      - 8098

  plumber:
    image: tsobu/plumber-cropmanager:latest
    #container_name: spring-cropmanager
    restart: always
    expose:
      - 8000

  haproxy:
    image: hypriot/rpi-haproxy
    #image: haproxy
    volumes:
      - ./conf/haproxy.cfg:/haproxy-override
      #- ./conf/haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg
    links:
      - spring
      - plumber
    ports:
      - "80:80"
      - "70:70"

    expose:
      - "80"
      - "70"